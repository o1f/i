!function(o){"use strict";function f(t){return b.querySelectorAll(t)}function e(t){this.config=l.extend(t),this.view()}var b=document,v="getElementsByClassName",c="OK",r="Cancel",m=["dialog","toast","loading","iframe"],a={type:0,mask:!0,maskClose:!0,closebtn:!0,whenBtnClickClose:!0,fixed:!0,anim:"def"},l={extend:function(t,e){var n="object"==typeof e?JSON.parse(JSON.stringify(e)):JSON.parse(JSON.stringify(a));for(var i in t)n[i]=t[i];return n},timer:{},end:{},touch:function(t,e){t.addEventListener("click",function(t){e.call(this,t)},!1)}},p=0,h=["wbui"];e.prototype.view=function(){var t=this,n=t.config,e=b.createElement("div"),i="object"==typeof n.content,a="string"==typeof n.type?n.type:h[0]+"-"+m[n.type||0];t.id=e.id=h[0]+p,e.setAttribute("class",h[0]+" "+a),e.setAttribute("index",p);var s,o,c=(s="object"==typeof n.title,n.title?'<h3 class="wbui-title'+(s?" "+n.title[1]:"")+'">'+(s?n.title[0]:n.title)+"</h3>":""),r=(o="object"==typeof n.closebtn,n.closebtn?'<a class="wbui-close'+(o?" "+n.closetype[1]:"")+'"><i></i></a>':""),l=function(){"string"==typeof n.btn&&(n.btn=[n.btn]);var t,e=(n.btn||[]).length;return 0!==e&&n.btn?(t='<span yes type="1">'+n.btn[0]+"</span>",2===e&&(t='<span no type="0">'+n.btn[1]+"</span>"+t),'<div class="wbui-btn">'+t+"</div>"):""}();if(n.fixed||(n.top=n.hasOwnProperty("top")?n.top:100,n.style=n.style||"",n.style+=" top:"+(b.body.scrollTop+n.top)+"px"),2===n.type&&(n.content='<i></i><i class="wbui-load"></i><i></i><p>'+(n.content||"")+"</p>"),3===n.type){n.content=i?n.content:[n.content||"","auto"];n.content='<iframe scrolling="'+(n.content[1]||"auto")+'" allowtransparency="true" id="'+m[3]+p+'" name="'+m[3]+p+'" onload="this.className=\'\';" class="wbui-load" frameborder="0" src="'+n.content[0]+'"></iframe>'}if(n.skin&&(n.anim="fade"),"msg"===n.skin&&(n.mask=n.closebtn=!1,n.time=2),e.innerHTML=(n.mask?"<div "+("string"==typeof n.mask?'style="'+n.mask+'"':"")+' class="wbui-mask"></div>':"")+'<div class="wbui-main" '+(n.fixed?"":'style="position:static;"')+'><div class="wbui-section"><div class="wbui-child '+(n.skin?"wbui-"+n.skin+" ":"")+(n.className?n.className:"")+" "+(n.anim?"wbui-anim-"+n.anim:"")+'" '+(n.style?'style="'+n.style+'"':"")+">"+c+'<div class="wbui-cont">'+n.content+"</div>"+l+(n.closebtn?r:"")+"</div></div></div>",!n.type||2===n.type){var u=b[v](h[0]+m[n.type]);1<=u.length&&wbui.close(u[0].getAttribute("index"))}document.body.appendChild(e);var d=t.elem=f("#"+t.id)[0];n.success&&n.success(d),t.index=p++,t.action(n,d)},e.prototype.action=function(t,e){var n=this;t.time&&(l.timer[n.index]=setTimeout(function(){wbui.close(n.index)},1e3*t.time));function i(){0==this.getAttribute("type")?(t.no&&t.no(),wbui.close(n.index)):(t.yes&&t.yes(n.index),t.whenBtnClickClose&&wbui.close(n.index))}if(t.btn)for(var a=e[v]("wbui-btn")[0].children,s=a.length,o=0;o<s;o++)l.touch(a[o],i);if(t.mask&&t.maskClose){var c=e[v]("wbui-mask")[0];l.touch(c,function(){wbui.close(n.index,t.end)})}if(t.closebtn){var r=e[v]("wbui-close")[0];l.touch(r,function(){wbui.close(n.index,t.end)})}t.end&&(l.end[n.index]=t.end)},o.wbui={v:"1.0.4",index:p,open:function(t){return new e(t||{}).index},alert:function(t,e){var n="function"==typeof e,i=l.extend({content:t,btn:c});return i=n?l.extend({yes:e},i):l.extend(e,i),o.wbui.open(i)},confirm:function(t,e,n,i){var a="function"==typeof e,s=l.extend({content:t,btn:[c,r]});return s=a?l.extend({yes:e,no:n},s):l.extend(e,s),o.wbui.open(s)},toast:function(t,e){var n="function"==typeof e,i=l.extend({type:1,content:t,mask:0,closebtn:0,time:2});return i=n?l.extend({end:e},i):l.extend(e,i),o.wbui.open(i)},loading:function(t){var e="function"==typeof t,n=l.extend({type:2,content:0,mask:0,maskClose:0,closebtn:0});return n=e?l.extend({end:t},n):l.extend(t,n),o.wbui.open(n)},iframe:function(t,e,n,i){var a="function"==typeof e,s=l.extend({type:3,content:t,mask:0});return s=a?l.extend({yes:e,no:n},s):l.extend(e,s),o.wbui.open(s)},close:function(t){var e=f("#"+h[0]+t)[0];e&&(e.innerHTML="",b.body.removeChild(e),clearTimeout(l.timer[t]),delete l.timer[t],"function"==typeof l.end[t]&&l.end[t](),delete l.end[t])},closeAll:function(){for(var t=b[v](h[0]),e=0,n=t.length;e<n;e++)wbui.close(0|t[0].getAttribute("index"))}},"function"==typeof define?define(function(){return wbui}):function(){var t=document.scripts,e=t[t.length-1],n=e.src;n.substring(0,n.lastIndexOf("/")+1);e.getAttribute("merge")}()}(window);var WB=window.WB||{};WB.SSTSettings={init:function(t){var e=WB.SSTSettings;e.switchAction(t),e.seoItem(t),e.inputLivePreview(t),e.analytics(t),e.navTabs(t),e.range(t,t("#J_sitemapSEOSettingBox .wbs-input-range"),function(t){return 100*t+"%"}),e.tabs(t,t("#J_normalSettingTabs"))},switchAction:function(n,t){(t||n(".wb-switch[data-target]")).on("change",function(){var t=n(this),e=n(t.data("target"));t.prop("checked")?(t.attr("data-value","true"),e.addClass("active")):(t.attr("data-value","false"),e.removeClass("active"))})},seoItem:function(n){n(".input-with-count").each(function(){var t=n(this);WB.SSTSettings.getInputTextLength(n,t.find("[data-max]"),t.find(".count"))}),n(".settings-cate-dropdown").on("change",function(){var t=n(this).val();n("#J_seo_"+t).addClass("active").siblings(".cate-item").removeClass("active")}),n(".wb-tags-module").each(function(){WB.SSTSettings.tagsModule(n,n(this))}),n(".preview-desc").each(function(){var t=n(this),e=t.text();200<e.length&&(e=e.substring(0,200)+"..."),t.text(e)}),n(".preview-title").each(function(){var t=n(this),e=t.text();120<e.length&&(e=e.substring(0,120)+"..."),t.text(e)}),n("#J_switchDisplayMoreItems").on("click",function(){"0"==n(this).attr("data-active")?(n(this).text("[ - 收起 ]"),n(this).attr("data-active","1")):(n(this).text("[ + 展开 ]"),n(this).attr("data-active","0")),n("#J_moreSEOItems").toggleClass("active")})},tagsModule:function(s,t){var e=t||s(".wb-tags-module"),i=e.find("[data-tags-value]"),o=e.find(".wb-tag-input"),n=e.find(".tag-items"),a=e.find(".count"),c=i.val(),r=!1,l=0;function u(t){c=""!=c?c+","+t:t,i.val(c)}function d(t){var e='<div class="tag-item"><span>'+t+' </span><a class="del" data-del-val="'+t+'"></a></div>';n.append(e)}function f(t){var e=t||c.length,n=i.data("max")||100;a.html("已输入<b>"+e+"</b>"),a[n<e?"addClass":"removeClass"]("hl")}f(),o.on("keydown blur paste",function(t){var e=t.keyCode||t.which||0,n=s(this);if(32===e?l++:l=0,"paste"!=t.type||r||(r=!0),"blur"===t.type||13===e||188===e||1<l){var i=s.trim(o.val());if(""==i)return!1;if(r){var a=i.split(",");console.log(a),0<a.length&&a.forEach(function(t){var e=s.trim(t);if(""==e)return!1;d(e),u(e)}),r=!1}else d(i),u(i);return n.val(""),f(),!1}if(8===e&&0===n.val().length)return n.val(""),!1}),e.on("click",".tag-item .del",function(){var t,e=s(this).parent(),n=s(this).attr("data-del-val");t=n,e.remove(),c=(c=(c=c.replace(t,"")).replace(/(^,)|(,$)/,"")).replace(/,,/,","),i.val(c),f()})},getInputTextLength:function(e,t,n){var i=Number(t.data("max"));t.each(function(){var t=e(this).val().length;i<t&&n.addClass("hl"),n.html("已输入<b>"+t+"</b>")}),t.on("input change",function(){var t=e(this).val().length;i<t&&n.addClass("hl"),n.html("已输入<b>"+t+"</b>")})},inputLivePreview:function(i){i("[data-preview-target]").on("input change",function(){var t=i(this).data("preview-target"),e=Number(i(this).data("max")),n=i(this).val();n.length>e&&(n=n.substring(0,e)+"..."),i(t).text(n)})},analytics:function(a){var s=a("[data-wba-source]").length&&a("[data-wba-source]").data("wba-source")||window.wbaSource||document.domain;a("a[data-wba-campaign]").each(function(){var t=a(this),e=t.data("wba-campaign"),n=t.data("wba-media")||"link",i=t.attr("href");i+=i.match("[?]")?"&":"?",i+="utm_source="+s,i+="&utm_media="+n,i+="&utm_campaign="+e,t.attr("href",i)})},tabs:function(t,e,n){n=n||{};var i=e||t("#J_tabBox"),a=n.tabNav||i.find(".tab-nav-item,.tab-nav li"),s=n.tabCont||i.find(".tab-cont"),o=n.currClass||"current",c=n.callBackFn,r=0;a.on("click",function(){r=t(this).index(),a.removeClass(o).eq(r).addClass(o),s.removeClass(o).eq(r).addClass(o),c&&c()})},navTabs:function(n){if(0<n(".wbs-tabs").length){var i=n(".wbs-tabs .tab-item"),t=0;"undefined"!=typeof localStorage&&(t=localStorage.getItem("WB_SST_active_tab")),n("#optionsframework-wrap .tab-content").eq(t).addClass("current").siblings(".tab-content").removeClass("current"),n("#optionsframework-wrap .tab-item").eq(t).addClass("current").siblings(".tab-item").removeClass("current"),i.on("click",function(t){t.preventDefault(),i.removeClass("current"),n(this).addClass("current").siblings(".tab-item").removeClass("current"),"undefined"!=typeof localStorage&&localStorage.setItem("WB_SST_active_tab",n(this).index());var e=n(this).attr("data-href");return n(e).addClass("current").siblings(".tab-content").removeClass("current"),!1})}},range:function(e,t,n){(t||e(".wbs-input-range")).on("input change",function(){var t=n&&n(e(this).val())||e(this).val();e(this).next(".wbs-range-val").html(t)})}},jQuery(document).ready(function(t){WB.SSTSettings.init(t),localStorage.getItem("WB_SST_NOTICE_CLOSE")||t("#J_sstNotice").slideDown(),t("#J_sstNotice .sst-notice-close").on("click",function(){t("#J_sstNotice").hide(),localStorage.setItem("WB_SST_NOTICE_CLOSE",!0)}),t(".wbs-aside-sst").find(".tab-item").on("click",function(){t(this).addClass("current").siblings(".tab-item").removeClass("current")}),t("#optionsframework-wrap").find("input,textarea").on("change",function(){t(window).on("beforeunload",function(){return confirm("您修改的设置尚未保存，确定离开此页面吗？")})}),t("#optionsframework-submit .wbs-btn-primary").on("click",function(){t(window).unbind("beforeunload")})});